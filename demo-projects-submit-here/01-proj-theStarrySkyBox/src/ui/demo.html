<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ˜Ÿç©ºå®ç›’ - Demo Day æ¼”ç¤ºç‰ˆ</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap');
        
        :root{
            --night-sky:#0c0c1d;
            --star-color:#ffffff;
            --glow-color:rgba(255,255,255,0.7);
            --text-color:#e0e0e0;
            --accent-color:#f0a5a5;
        }
        
        body{
            margin:0;
            padding:0;
            background: linear-gradient(135deg, #0c0c1d 0%, #1a1a2e 50%, #16213e 100%) !important;
            color:var(--text-color);
            font-family:'Noto Serif SC',serif;
            overflow:hidden;
            min-height: 100vh;
            width: 100%;
            height: 100%;
        }
        
        html {
            background: linear-gradient(135deg, #0c0c1d 0%, #1a1a2e 50%, #16213e 100%);
            height: 100%;
            width: 100%;
        }
        

        
        #login-screen{
            display:flex;
            flex-direction:column;
            justify-content:center;
            align-items:center;
            height:100vh;
            text-align:center;
            transition:all 1s ease-out;
            background: transparent;
            backdrop-filter: blur(5px);
        }
        
        #login-screen.fade-out {
            opacity: 0;
            transform: translateY(-50px);
        }
        
        #login-screen h1{
            font-family:'ZCOOL KuaiLe',cursive;
            font-size:4em;
            color:white;
            text-shadow:0 0 20px var(--glow-color);
            margin-bottom: 0.5em;
            animation: titleGlow 3s ease-in-out infinite alternate;
        }
        
        @keyframes titleGlow {
            from { text-shadow: 0 0 20px var(--glow-color); }
            to { text-shadow: 0 0 30px var(--glow-color), 0 0 40px rgba(255, 255, 255, 0.5); }
        }
        
        #login-screen p {
            font-size: 1.2em;
            margin-bottom: 2em;
            opacity: 0.9;
        }
        
        #login-screen input{
            padding:15px 25px;
            font-size:1.1em;
            border-radius:25px;
            border:2px solid var(--accent-color);
            background:rgba(255,255,255,0.1);
            color:white;
            text-align:center;
            margin:20px 0;
            backdrop-filter: blur(5px);
            transition: all 0.3s ease;
        }
        
        #login-screen input:focus {
            outline: none;
            border-color: #fff;
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }
        
        #login-screen button{
            padding:15px 40px;
            font-size:1.2em;
            font-family:'ZCOOL KuaiLe',cursive;
            border:none;
            border-radius:25px;
            background: linear-gradient(45deg, var(--accent-color), #ff6b6b);
            color:white;
            cursor:pointer;
            transition:all 0.3s ease;
            box-shadow: 0 5px 15px rgba(240, 165, 165, 0.3);
        }
        
        #login-screen button:hover{
            transform:translateY(-2px);
            box-shadow: 0 8px 25px rgba(240, 165, 165, 0.5);
        }
        

        
        #gallery{
            position:absolute;
            top:0;
            left:0;
            width:100vw;
            height:100vh;
            opacity:0;
            visibility:hidden;
            transition:all 1s ease-in;
        }
        
        #gallery.active {
            opacity: 1;
            visibility: visible;
        }
        
        /* åŠ¨æ€æ˜Ÿç©ºèƒŒæ™¯ */
        .stars-bg{
            position:absolute;
            width:100%;
            height:100%;
            background:transparent;
            background-image:
                radial-gradient(white,rgba(255,255,255,.2) 2px,transparent 40px),
                radial-gradient(white,rgba(255,255,255,.15) 1px,transparent 30px),
                radial-gradient(white,rgba(255,255,255,.1) 2px,transparent 40px),
                radial-gradient(rgba(255,255,255,.4),rgba(255,255,255,.1) 2px,transparent 30px);
            background-size:550px 550px,350px 350px,250px 250px,150px 150px;
            background-position:0 0,40px 60px,130px 270px,70px 100px;
            animation:starsTwinkle 8s infinite linear;
        }
        
        @keyframes starsTwinkle {
            0% { transform: scale(1) rotate(0deg); opacity: 0.8; }
            25% { transform: scale(1.05) rotate(90deg); opacity: 1; }
            50% { transform: scale(1) rotate(180deg); opacity: 0.9; }
            75% { transform: scale(1.05) rotate(270deg); opacity: 1; }
            100% { transform: scale(1) rotate(360deg); opacity: 0.8; }
        }
        
        /* NFTæ˜Ÿæ˜Ÿä¼˜åŒ– */
        .star{
            position:absolute;
            width:16px;
            height:16px;
            background: radial-gradient(circle, #fff 0%, #f0a5a5 70%, transparent 100%);
            border-radius:50%;
            cursor:pointer;
            animation:starPulse 3s infinite ease-in-out;
            transition:all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 
                0 0 10px rgba(255, 255, 255, 0.8),
                0 0 20px rgba(240, 165, 165, 0.6),
                0 0 30px rgba(240, 165, 165, 0.4);
        }
        
        .star:hover{
            transform:scale(1.8) rotate(360deg);
            animation-play-state: paused;
            box-shadow: 
                0 0 20px rgba(255, 255, 255, 1),
                0 0 40px rgba(240, 165, 165, 0.8),
                0 0 60px rgba(240, 165, 165, 0.6);
        }
        
        @keyframes starPulse {
            0%, 100% { 
                transform: scale(1); 
                opacity: 0.8; 
            }
            50% { 
                transform: scale(1.2); 
                opacity: 1; 
            }
        }
        
        /* ä¸åŒå¤§å°çš„æ˜Ÿæ˜Ÿ */
        .star.large {
            width: 20px;
            height: 20px;
        }
        
        .star.small {
            width: 12px;
            height: 12px;
        }
        
        /* ç‰¹æ®Šé¢œè‰²çš„æ˜Ÿæ˜Ÿ */
        .star.golden {
            background: radial-gradient(circle, #ffd700 0%, #ffb347 70%, transparent 100%);
            box-shadow: 
                0 0 10px rgba(255, 215, 0, 0.8),
                0 0 20px rgba(255, 179, 71, 0.6),
                0 0 30px rgba(255, 179, 71, 0.4);
        }
        
        .star.blue {
            background: radial-gradient(circle, #87ceeb 0%, #4169e1 70%, transparent 100%);
            box-shadow: 
                0 0 10px rgba(135, 206, 235, 0.8),
                0 0 20px rgba(65, 105, 225, 0.6),
                0 0 30px rgba(65, 105, 225, 0.4);
        }
        
        .star.pink {
            background: radial-gradient(circle, #ffc0cb 0%, #ff69b4 70%, transparent 100%);
            box-shadow: 
                0 0 10px rgba(255, 192, 203, 0.8),
                0 0 20px rgba(255, 105, 180, 0.6),
                0 0 30px rgba(255, 105, 180, 0.4);
        }
        
        /* æ˜Ÿæ˜Ÿå‡ºç°åŠ¨ç”» */
        @keyframes starAppear {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 0;
            }
            50% {
                transform: scale(1.5) rotate(180deg);
                opacity: 0.8;
            }
            100% {
                transform: scale(1) rotate(360deg);
                opacity: 1;
            }
        }
        
        .star.appearing {
            animation: starAppear 0.8s ease-out forwards;
        }
        
        /* ä¿¡ä»¶æŸ¥çœ‹å™¨ */
        #letter-viewer{
            position:fixed;
            top:0;
            left:0;
            width:100%;
            height:100%;
            background:rgba(0,0,0,0.3);
            backdrop-filter: blur(5px);
            display:none;
            justify-content:center;
            align-items:center;
            z-index:1000;
        }
        
        #letter-viewer.active {
            display: flex;
            animation: fadeIn 0.5s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        #letter-viewer img{
            max-width:85%;
            max-height:85%;
            border-radius:15px;
            border: 3px solid rgba(255, 255, 255, 0.8);
            box-shadow: 
                0 0 30px rgba(255, 255, 255, 0.8),
                0 0 60px rgba(240, 165, 165, 0.6),
                0 0 100px rgba(240, 165, 165, 0.4),
                0 10px 30px rgba(0, 0, 0, 0.5);
            animation: imageZoom 0.5s ease-out;
        }
        
        @keyframes imageZoom {
            from {
                transform: scale(0.8);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        #close-viewer{
            position:absolute;
            top:30px;
            right:40px;
            font-size:3em;
            color:white;
            cursor:pointer;
            transition:all 0.3s ease;
            text-shadow: 
                0 0 15px rgba(255, 255, 255, 0.9),
                0 0 25px rgba(240, 165, 165, 0.7),
                0 0 35px rgba(240, 165, 165, 0.5);
            background: rgba(0, 0, 0, 0.3);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }
        
        #close-viewer:hover{
            transform:rotate(90deg) scale(1.1);
            color:var(--accent-color);
            background: rgba(240, 165, 165, 0.2);
            text-shadow: 
                0 0 20px rgba(255, 255, 255, 1),
                0 0 30px rgba(240, 165, 165, 0.9),
                0 0 40px rgba(240, 165, 165, 0.7);
        }
        
        /* åŠ è½½æŒ‡ç¤ºå™¨ */
        #loading-indicator{
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            display: none;
        }
        
        #loading-indicator.active {
            display: block;
        }
        
        .loading-text {
            font-size: 1.5em;
            text-shadow: 0 0 15px var(--glow-color);
            animation: loadingPulse 2s infinite ease-in-out;
            margin: 10px 0;
        }
        
        @keyframes loadingPulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }
        
        .loading-spinner {
            margin: 20px auto;
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid var(--accent-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* ç»Ÿè®¡ä¿¡æ¯ */
        #stats {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            padding: 15px;
            border-radius: 15px;
            font-size: 0.9em;
            opacity: 0;
            transition: opacity 0.5s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        #stats.active {
            opacity: 1;
        }
        
        #stats div {
            margin: 5px 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            #login-screen h1 {
                font-size: 2.5em;
            }
            
            #login-screen input,
            #login-screen button {
                width: 80%;
                max-width: 300px;
            }
            
            .star {
                width: 12px;
                height: 12px;
            }
            
            #letter-viewer img {
                max-width: 95%;
                max-height: 95%;
            }
            
            #stats {
                font-size: 0.8em;
                padding: 10px;
            }
        }
        
        /* æµ®åŠ¨ç²’å­æ•ˆæœ */
        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            pointer-events: none;
            animation: float 4s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { 
                transform: translateY(0px); 
                opacity: 0.3; 
            }
            50% { 
                transform: translateY(-20px); 
                opacity: 0.7; 
            }
        }
        
        /* èƒŒæ™¯è£…é¥°æ˜Ÿæ˜Ÿ */
        .bg-star {
            position: absolute;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            pointer-events: none;
            animation: bgStarTwinkle 4s ease-in-out infinite;
        }
        
        .bg-star.tiny {
            width: 2px;
            height: 2px;
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 4px rgba(255, 255, 255, 0.4);
        }
        
        .bg-star.small {
            width: 3px;
            height: 3px;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 6px rgba(255, 255, 255, 0.5);
        }
        
        .bg-star.medium {
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.6);
        }
        
        .bg-star.bright {
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 1);
            box-shadow: 0 0 12px rgba(255, 255, 255, 0.8);
        }
        
        @keyframes bgStarTwinkle {
            0%, 100% { 
                opacity: 0.3;
                transform: scale(1);
            }
            25% { 
                opacity: 0.8;
                transform: scale(1.1);
            }
            50% { 
                opacity: 0.5;
                transform: scale(1);
            }
            75% { 
                opacity: 0.9;
                transform: scale(1.2);
            }
        }
        
        /* å¯ç‚¹å‡»æ˜Ÿæ˜Ÿå¢å¼ºæ•ˆæœ */
        .star.clickable {
            z-index: 100;
            position: relative;
            animation: clickableStarPulse 3s infinite ease-in-out;
        }
        
        /* çœŸå®NFTæ˜Ÿæ˜Ÿç‰¹æ®Šæ•ˆæœ */
        .star.real-nft {
            z-index: 200;
            position: relative;
            animation: realNftPulse 2s infinite ease-in-out;
            width: 24px !important;
            height: 24px !important;
        }
        
        @keyframes clickableStarPulse {
            0%, 100% { 
                transform: scale(1); 
                opacity: 0.9;
                box-shadow: 
                    0 0 10px rgba(255, 255, 255, 0.8),
                    0 0 20px rgba(240, 165, 165, 0.6),
                    0 0 30px rgba(240, 165, 165, 0.4);
            }
            50% { 
                transform: scale(1.15); 
                opacity: 1;
                box-shadow: 
                    0 0 15px rgba(255, 255, 255, 1),
                    0 0 30px rgba(240, 165, 165, 0.8),
                    0 0 45px rgba(240, 165, 165, 0.6);
            }
        }
        
        @keyframes realNftPulse {
            0%, 100% { 
                transform: scale(1); 
                opacity: 0.95;
                box-shadow: 
                    0 0 15px rgba(255, 215, 0, 1),
                    0 0 30px rgba(255, 215, 0, 0.8),
                    0 0 45px rgba(255, 215, 0, 0.6),
                    0 0 60px rgba(255, 215, 0, 0.4);
            }
            50% { 
                transform: scale(1.3); 
                opacity: 1;
                box-shadow: 
                    0 0 20px rgba(255, 215, 0, 1),
                    0 0 40px rgba(255, 215, 0, 0.9),
                    0 0 60px rgba(255, 215, 0, 0.7),
                    0 0 80px rgba(255, 215, 0, 0.5);
            }
        }
    </style>
</head>
<body>
    <div id="login-screen">
        <h1>æ˜Ÿç©ºå®ç›’</h1>
        <p>è¾“å…¥å¯†è¯­ï¼Œç‚¹äº®åªå±äºä½ çš„æ˜Ÿç©º</p>
        <input type="password" id="password-input" placeholder="â— â— â— â—">
        <button id="login-button">å¼€å¯æ˜Ÿç©ºä¹‹æ—…</button>
    </div>

    <div id="gallery">
        <div class="stars-bg"></div>
        <div id="stats">
            <div>ğŸ’« å·²å‘ç°æ˜Ÿæ˜Ÿï¼š<span id="star-count">0</span> é¢—</div>
            <div>ğŸŒŸ çœŸå®NFTï¼š<span id="real-nft-count">0</span> ä¸ª</div>
            <div>ğŸ“® çè´µå›å¿†ï¼š<span id="memory-count">0</span> ä»½</div>
            <div>âœ¨ æ˜Ÿç©ºäº®åº¦ï¼š<span id="brightness">0</span>%</div>
        </div>
        <div id="loading-indicator">
            <div class="loading-text">æ­£åœ¨ä¸ºä½ æ‘˜å–æ˜Ÿæ˜Ÿ...</div>
            <div class="loading-text">æ¯ä¸€é¢—æ˜Ÿéƒ½æ˜¯ä¸€ä»½çè´µçš„å›å¿†</div>
            <div class="loading-spinner"></div>
        </div>
    </div>

    <div id="letter-viewer">
        <span id="close-viewer">&times;</span>
        <img id="letter-image" src="" alt="ä¿¡ä»¶å†…å®¹">
    </div>

    <script src="./ethers.umd.min.js"></script>
    <script src="./config.js"></script>
    <script>
        // æ¼”ç¤ºæ¨¡å¼æ•°æ®
        const demoMode = true;
        const demoStars = [
            // çœŸå®NFTå°†åŠ¨æ€æ·»åŠ 
        
            {
                id: 1,
                title: "ç¬¬ä¸€å°ä¿¡",
                content: "æ¥è‡ªå¿—æ„¿è€…çš„ç¬¬ä¸€å°ä¿¡ï¼Œå……æ»¡äº†æ¸©æš–çš„é¼“åŠ±...",
                image: "data:image/svg+xml;charset=utf-8," + encodeURIComponent(`
                    <svg width="400" height="300" xmlns="http://www.w3.org/2000/svg">
                        <rect width="100%" height="100%" fill="#f0f8ff"/>
                        <text x="50%" y="35%" font-family="Arial, sans-serif" font-size="24" fill="#333333" text-anchor="middle" font-weight="bold">
                            âœ¨ ç¬¬ä¸€å°ä¿¡
                        </text>
                        <text x="50%" y="55%" font-family="Arial, sans-serif" font-size="16" fill="#666666" text-anchor="middle">
                            äº²çˆ±çš„æœ‹å‹ï¼Œ
                        </text>
                        <text x="50%" y="70%" font-family="Arial, sans-serif" font-size="14" fill="#666666" text-anchor="middle">
                            æ„¿ä½ æ­£åœ¨ä¸ºè‡ªå·±æ²‰æ·€ç€è·¯ä¸Šçš„æ¸©æš–ä¸å¸Œæœ›ï¼Œ
                        </text>
                        <text x="50%" y="85%" font-family="Arial, sans-serif" font-size="14" fill="#666666" text-anchor="middle">
                            å†™äº†è¿™å°ä¿¡ã€‚
                        </text>
                    </svg>
                `),
                position: { top: "25%", left: "15%" },
                size: "large",
                color: "golden"
            },
            {
                id: 2,
                title: "ç”Ÿæ—¥ç¥ç¦",
                content: "ç‰¹åˆ«çš„ç”Ÿæ—¥ç¥ç¦ï¼Œè®©è¿™ä¸ªæ—¥å­æ›´åŠ éš¾å¿˜...",
                image: "data:image/svg+xml;charset=utf-8," + encodeURIComponent(`
                    <svg width="400" height="300" xmlns="http://www.w3.org/2000/svg">
                        <rect width="100%" height="100%" fill="#fff5ee"/>
                        <text x="50%" y="35%" font-family="Arial, sans-serif" font-size="24" fill="#333333" text-anchor="middle" font-weight="bold">
                            ğŸ‚ ç”Ÿæ—¥å¿«ä¹
                        </text>
                        <text x="50%" y="55%" font-family="Arial, sans-serif" font-size="16" fill="#666666" text-anchor="middle">
                            æƒ³åœ¨è¿™ä¸ªç‰¹æ®Šçš„æ—¥å­é‡Œï¼Œ
                        </text>
                        <text x="50%" y="70%" font-family="Arial, sans-serif" font-size="14" fill="#666666" text-anchor="middle">
                            ä¸ºä½ é€ä¸Šä¸€ä»½ç‹¬ç‰¹çš„ç¥ç¦å’ŒæƒŠå–œï¼
                        </text>
                        <text x="50%" y="85%" font-family="Arial, sans-serif" font-size="14" fill="#666666" text-anchor="middle">
                            æ„¿ä½ æ°¸è¿œå¿«ä¹ï¼
                        </text>
                    </svg>
                `),
                position: { top: "60%", left: "75%" },
                size: "normal",
                color: "pink"
            },
            {
                id: 3,
                title: "å­¦ä¹ é¼“åŠ±",
                content: "å…³äºå­¦ä¹ çš„é¼“åŠ±è¯è¯­ï¼Œç»™äºˆå‰è¿›çš„åŠ¨åŠ›...",
                image: "data:image/svg+xml;charset=utf-8," + encodeURIComponent(`
                    <svg width="400" height="300" xmlns="http://www.w3.org/2000/svg">
                        <rect width="100%" height="100%" fill="#f0ffff"/>
                        <text x="50%" y="35%" font-family="Arial, sans-serif" font-size="24" fill="#333333" text-anchor="middle" font-weight="bold">
                            ğŸ“š å­¦ä¹ é¼“åŠ±
                        </text>
                        <text x="50%" y="55%" font-family="Arial, sans-serif" font-size="16" fill="#666666" text-anchor="middle">
                            ä¸è¦å®³æ€•ä¸åˆ«äººæ¯”è¿‡ï¼Œ
                        </text>
                        <text x="50%" y="70%" font-family="Arial, sans-serif" font-size="14" fill="#666666" text-anchor="middle">
                            æ¯ä¸€æ¬¡çš„åŠªåŠ›éƒ½åœ¨ä¸ºä½ ç§¯ç´¯å¥‡è¿¹ï¼
                        </text>
                        <text x="50%" y="85%" font-family="Arial, sans-serif" font-size="14" fill="#666666" text-anchor="middle">
                            åŠ æ²¹ï¼
                        </text>
                    </svg>
                `),
                position: { top: "15%", left: "70%" },
                size: "normal",
                color: "blue"
            },
            {
                id: 4,
                title: "æ¢¦æƒ³å¯å‘",
                content: "å…³äºæ¢¦æƒ³çš„ç¾å¥½è¯è¯­ï¼Œç‚¹äº®å¿ƒä¸­çš„å¸Œæœ›...",
                image: "data:image/svg+xml;charset=utf-8," + encodeURIComponent(`
                    <svg width="400" height="300" xmlns="http://www.w3.org/2000/svg">
                        <rect width="100%" height="100%" fill="#fff8ee"/>
                        <text x="50%" y="35%" font-family="Arial, sans-serif" font-size="24" fill="#333333" text-anchor="middle" font-weight="bold">
                            ğŸŒŸ æ¢¦æƒ³å¯å‘
                        </text>
                        <text x="50%" y="55%" font-family="Arial, sans-serif" font-size="16" fill="#666666" text-anchor="middle">
                            æ¢¦æƒ³æ˜¯ä¸ºäº†æœ‰ä¸€å¤©èƒ½å®ç°ï¼Œ
                        </text>
                        <text x="50%" y="70%" font-family="Arial, sans-serif" font-size="14" fill="#666666" text-anchor="middle">
                            ä¸è¦å®³æ€•ä¸åˆ«äººæ¯”è¿‡ï¼
                        </text>
                        <text x="50%" y="85%" font-family="Arial, sans-serif" font-size="14" fill="#666666" text-anchor="middle">
                            ç›¸ä¿¡è‡ªå·±ï¼
                        </text>
                    </svg>
                `),
                position: { top: "25%", left: "80%" },
                size: "normal",
                color: "golden"
            },
            {
                id: 5,
                title: "å‹è°Šçè—",
                content: "å…³äºå‹è°Šçš„çè´µè¯è¯­ï¼Œæ¸©æš–å¦‚æ˜¥é£...",
                image: "data:image/svg+xml;charset=utf-8," + encodeURIComponent(`
                    <svg width="400" height="300" xmlns="http://www.w3.org/2000/svg">
                        <rect width="100%" height="100%" fill="#f5fffa"/>
                        <text x="50%" y="35%" font-family="Arial, sans-serif" font-size="24" fill="#333333" text-anchor="middle" font-weight="bold">
                            ğŸ‘­ å‹è°Šçè—
                        </text>
                        <text x="50%" y="55%" font-family="Arial, sans-serif" font-size="16" fill="#666666" text-anchor="middle">
                            è™½ç„¶æˆ‘ä»¬ä¸åœ¨åŒä¸€ä¸ªåœ°æ–¹ï¼Œ
                        </text>
                        <text x="50%" y="70%" font-family="Arial, sans-serif" font-size="14" fill="#666666" text-anchor="middle">
                            ä½†æˆ‘ä»¬çš„å‹è°Šå°†æ°¸è¿œä¸å˜ï¼
                        </text>
                        <text x="50%" y="85%" font-family="Arial, sans-serif" font-size="14" fill="#666666" text-anchor="middle">
                            çæƒœå‹è°Šâ¤ï¸
                        </text>
                    </svg>
                `),
                position: { top: "80%", left: "40%" },
                size: "normal",
                color: "normal"
            },
            {
                id: 6,
                title: "æ„Ÿè°¢çš„è¯",
                content: "çœŸè¯šçš„æ„Ÿè°¢è¯è¯­ï¼Œè¡¨è¾¾å†…å¿ƒçš„æ„Ÿæ¿€...",
                image: "data:image/svg+xml;charset=utf-8," + encodeURIComponent(`
                    <svg width="400" height="300" xmlns="http://www.w3.org/2000/svg">
                        <rect width="100%" height="100%" fill="#fff5f5"/>
                        <text x="50%" y="35%" font-family="Arial, sans-serif" font-size="24" fill="#333333" text-anchor="middle" font-weight="bold">
                            ğŸ™ æ„Ÿè°¢çš„è¯
                        </text>
                        <text x="50%" y="55%" font-family="Arial, sans-serif" font-size="16" fill="#666666" text-anchor="middle">
                            æ„Ÿè°¢ä½ åœ¨æˆ‘çš„äººç”Ÿè·¯ä¸Š
                        </text>
                        <text x="50%" y="70%" font-family="Arial, sans-serif" font-size="14" fill="#666666" text-anchor="middle">
                            å†™ä¸‹æ˜Ÿæ˜Ÿç‚¹ç‚¹ç»¿æ„ï¼Œ
                        </text>
                        <text x="50%" y="85%" font-family="Arial, sans-serif" font-size="14" fill="#666666" text-anchor="middle">
                            çœŸå¿ƒæ„Ÿè°¢ï¼
                        </text>
                    </svg>
                `),
                position: { top: "35%", left: "85%" },
                size: "small",
                color: "pink"
            },
            {
                id: 7,
                title: "æ–°å¹´ç¥ç¦",
                content: "æ–°å¹´åˆ°æ¥çš„ç¾å¥½ç¥ç¦ï¼Œå¸¦æ¥ä¸€å¹´çš„å¥½è¿...",
                image: "data:image/svg+xml;charset=utf-8," + encodeURIComponent(`
                    <svg width="400" height="300" xmlns="http://www.w3.org/2000/svg">
                        <rect width="100%" height="100%" fill="#fff0f0"/>
                        <text x="50%" y="35%" font-family="Arial, sans-serif" font-size="24" fill="#333333" text-anchor="middle" font-weight="bold">
                            ğŸ† æ–°å¹´ç¥ç¦
                        </text>
                        <text x="50%" y="55%" font-family="Arial, sans-serif" font-size="16" fill="#666666" text-anchor="middle">
                            æ–°çš„ä¸€å¹´æˆ‘ä»¬ä¸€èµ·æ¥ä¸‹ï¼Œ
                        </text>
                        <text x="50%" y="70%" font-family="Arial, sans-serif" font-size="14" fill="#666666" text-anchor="middle">
                            æ„¿ä½ å¥åº·å¿«ä¹ï¼Œ
                        </text>
                        <text x="50%" y="85%" font-family="Arial, sans-serif" font-size="14" fill="#666666" text-anchor="middle">
                            åŠªåŠ›å‘ä¸Šï¼
                        </text>
                    </svg>
                `),
                position: { top: "70%", left: "20%" },
                size: "normal",
                color: "golden"
            },
            {
                id: 8,
                title: "æˆé•¿è®°å½•",
                content: "è®°å½•æˆé•¿ç‚¹æ»´çš„æ¸©æš–æ–‡å­—ï¼Œè§è¯æ¯ä¸€æ­¥è¿›æ­¥...",
                image: "data:image/svg+xml;charset=utf-8," + encodeURIComponent(`
                    <svg width="400" height="300" xmlns="http://www.w3.org/2000/svg">
                        <rect width="100%" height="100%" fill="#f8ffff"/>
                        <text x="50%" y="35%" font-family="Arial, sans-serif" font-size="24" fill="#333333" text-anchor="middle" font-weight="bold">
                            ğŸ‘‘ æˆé•¿è®°å½•
                        </text>
                        <text x="50%" y="55%" font-family="Arial, sans-serif" font-size="16" fill="#666666" text-anchor="middle">
                            ä½ æ¯ä¸€æ¬¡çš„è¿›æ­¥ï¼Œ
                        </text>
                        <text x="50%" y="70%" font-family="Arial, sans-serif" font-size="14" fill="#666666" text-anchor="middle">
                            éƒ½è®©æˆ‘ä»¬æ€»å¾—ä¸ä¸è‡ªå·±å…±åŒæˆé•¿ã€‚
                        </text>
                        <text x="50%" y="85%" font-family="Arial, sans-serif" font-size="14" fill="#666666" text-anchor="middle">
                            åŠ æ²¹æˆé•¿ï¼
                        </text>
                    </svg>
                `),
                position: { top: "65%", left: "75%" },
                size: "normal",
                color: "blue"
            }
        ];

        // ç²’å­ç³»ç»Ÿ
        function createParticles() {
            const particleCount = 30;
            const gallery = document.getElementById('gallery');
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.width = Math.random() * 4 + 2 + 'px';
                particle.style.height = particle.style.width;
                particle.style.top = Math.random() * 100 + '%';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 4 + 's';
                particle.style.animationDuration = (Math.random() * 3 + 2) + 's';
                gallery.appendChild(particle);
            }
        }
        
        // èƒŒæ™¯æ˜Ÿæ˜Ÿç³»ç»Ÿ
        function createBackgroundStars(avoidZones = []) {
            const starCount = 200; // å¢åŠ èƒŒæ™¯æ˜Ÿæ˜Ÿæ•°é‡
            const starTypes = ['tiny', 'small', 'medium', 'bright'];
            const starWeights = [60, 25, 10, 5]; // ä¸åŒå¤§å°æ˜Ÿæ˜Ÿçš„æƒé‡
            
            // å¦‚æœå·²ç»å­˜åœ¨èƒŒæ™¯æ˜Ÿæ˜Ÿå®¹å™¨ï¼Œå…ˆåˆ é™¤å®ƒ
            const existingContainer = document.getElementById('bg-star-container');
            if (existingContainer) {
                existingContainer.remove();
            }
            
            // åˆ›å»ºèƒŒæ™¯æ˜Ÿæ˜Ÿå®¹å™¨
            const bgStarContainer = document.createElement('div');
            bgStarContainer.id = 'bg-star-container';
            bgStarContainer.style.position = 'fixed';
            bgStarContainer.style.top = '0';
            bgStarContainer.style.left = '0';
            bgStarContainer.style.width = '100%';
            bgStarContainer.style.height = '100%';
            bgStarContainer.style.zIndex = '2';
            bgStarContainer.style.pointerEvents = 'none';
            
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                
                // æ ¹æ®æƒé‡éšæœºé€‰æ‹©æ˜Ÿæ˜Ÿç±»å‹
                const randomWeight = Math.random() * 100;
                let starType = 'tiny';
                let cumulativeWeight = 0;
                
                for (let j = 0; j < starWeights.length; j++) {
                    cumulativeWeight += starWeights[j];
                    if (randomWeight <= cumulativeWeight) {
                        starType = starTypes[j];
                        break;
                    }
                }
                
                star.className = `bg-star ${starType}`;
                
                // ç”Ÿæˆä¸ä¸é¿è®©åŒºåŸŸé‡å çš„ä½ç½®
                let starTop, starLeft;
                let attempts = 0;
                const maxAttempts = 10;
                
                do {
                    starTop = Math.random() * 100;
                    starLeft = Math.random() * 100;
                    attempts++;
                } while (attempts < maxAttempts && isOverlapping(starTop, starLeft, avoidZones));
                
                star.style.top = starTop + '%';
                star.style.left = starLeft + '%';
                star.style.animationDelay = Math.random() * 4 + 's';
                star.style.animationDuration = (Math.random() * 3 + 2) + 's';
                
                bgStarContainer.appendChild(star);
            }
            
            // å°†èƒŒæ™¯æ˜Ÿæ˜Ÿå®¹å™¨æ·»åŠ åˆ°bodyä¸­ï¼Œè¿™æ ·å®ƒä»¬å§‹ç»ˆå¯è§
            document.body.appendChild(bgStarContainer);
        }
        
        // æ£€æŸ¥æ˜¯å¦ä¸é¿è®©åŒºåŸŸé‡å 
        function isOverlapping(starTop, starLeft, avoidZones) {
            for (let zone of avoidZones) {
                const distance = Math.sqrt(
                    Math.pow(starTop - zone.top, 2) + Math.pow(starLeft - zone.left, 2)
                );
                if (distance < zone.radius) {
                    return true;
                }
            }
            return false;
        }
        
        // ç”Ÿæˆé¿è®©åŒºåŸŸ
        function generateAvoidZones() {
            const zones = [
                // æ¼”ç¤ºæ˜Ÿæ˜Ÿçš„å›ºå®šä½ç½®
                { top: 25, left: 15, radius: 8 },  // ç¬¬ä¸€å°ä¿¡
                { top: 60, left: 75, radius: 8 },  // ç”Ÿæ—¥ç¥ç¦
                { top: 15, left: 70, radius: 8 },  // å­¦ä¹ é¼“åŠ±
                { top: 25, left: 80, radius: 8 },  // æ¢¦æƒ³å¯å‘
                { top: 80, left: 40, radius: 8 },  // å‹è°Šçè—
                { top: 35, left: 85, radius: 6 },  // æ„Ÿè°¢çš„è¯
                { top: 70, left: 20, radius: 8 },  // æ–°å¹´ç¥ç¦
                { top: 65, left: 75, radius: 8 }   // æˆé•¿è®°å½•
            ];
            
            // ä¸ºçœŸå®NFTæ˜Ÿæ˜Ÿæ·»åŠ é¿è®©åŒºåŸŸ
            demoStars.forEach(star => {
                if (star.isReal) {
                    zones.push({
                        top: parseFloat(star.position.top),
                        left: parseFloat(star.position.left),
                        radius: 12 // çœŸå®NFTæ˜Ÿæ˜Ÿéœ€è¦æ›´å¤§çš„é¿è®©åŒºåŸŸ
                    });
                }
            });
            
            return zones;
        }

        // ç»Ÿè®¡æ•°æ®
        let stats = {
            starCount: 0,
            realNftCount: 0,
            memoryCount: 0,
            brightness: 0
        };

        function updateStats() {
            document.getElementById('star-count').textContent = stats.starCount;
            document.getElementById('real-nft-count').textContent = stats.realNftCount;
            document.getElementById('memory-count').textContent = stats.memoryCount;
            document.getElementById('brightness').textContent = stats.brightness;
        }

        function animateNumber(element, targetNumber, duration = 1000) {
            const startNumber = parseInt(element.textContent) || 0;
            const increment = (targetNumber - startNumber) / (duration / 16);
            let currentNumber = startNumber;
            
            const timer = setInterval(() => {
                currentNumber += increment;
                if (currentNumber >= targetNumber) {
                    currentNumber = targetNumber;
                    clearInterval(timer);
                }
                element.textContent = Math.floor(currentNumber);
            }, 16);
        }

        // åº”ç”¨é€»è¾‘
        document.addEventListener('DOMContentLoaded', () => {
            const loginButton = document.getElementById('login-button');
            const passwordInput = document.getElementById('password-input');
            const loginScreen = document.getElementById('login-screen');
            const gallery = document.getElementById('gallery');
            const loadingIndicator = document.getElementById('loading-indicator');
            const statsDiv = document.getElementById('stats');
            
            // åˆ›å»ºç²’å­æ•ˆæœå’ŒèƒŒæ™¯æ˜Ÿæ˜Ÿ
            createParticles();
            createBackgroundStars(); // ç«‹å³åˆ›å»ºèƒŒæ™¯æ˜Ÿæ˜Ÿï¼Œè®©æ•´ä¸ªé¡µé¢éƒ½æœ‰æ˜Ÿç©ºæ•ˆæœ
            
            // å›è½¦é”®ç™»å½•
            passwordInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    loginButton.click();
                }
            });
            
            loginButton.addEventListener('click', () => {
                if (passwordInput.value === '1234') {
                    loginScreen.classList.add('fade-out');
                    setTimeout(() => {
                        loginScreen.style.display = 'none';
                        gallery.classList.add('active');
                        loadStars();
                    }, 1000);
                } else {
                    // é”™è¯¯æç¤ºåŠ¨ç”»
                    passwordInput.style.borderColor = '#ff4757';
                    passwordInput.style.animation = 'shake 0.5s ease-in-out';
                    setTimeout(() => {
                        passwordInput.style.borderColor = 'var(--accent-color)';
                        passwordInput.style.animation = '';
                    }, 500);
                }
            });

            // é”™è¯¯åŠ¨ç”»
            const style = document.createElement('style');
            style.textContent = `
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    25% { transform: translateX(-5px); }
                    75% { transform: translateX(5px); }
                }
            `;
            document.head.appendChild(style);

            // ä¿¡ä»¶æŸ¥çœ‹å™¨
            const letterViewer = document.getElementById('letter-viewer');
            const closeViewer = document.getElementById('close-viewer');
            const letterImage = document.getElementById('letter-image');
            
            closeViewer.addEventListener('click', closeLetter);
            letterViewer.addEventListener('click', (e) => {
                if (e.target === letterViewer) {
                    closeLetter();
                }
            });

            function closeLetter() {
                letterViewer.classList.remove('active');
                setTimeout(() => {
                    letterViewer.style.display = 'none';
                }, 300);
            }

            // æ¼”ç¤ºæ¨¡å¼åŠ è½½æ˜Ÿæ˜Ÿ
            async function loadStars() {
                loadingIndicator.classList.add('active');
                console.log("--- æ˜Ÿç©ºå®ç›’åŠ è½½ä¸­ ---");
                
                // æ˜¾ç¤ºç»Ÿè®¡é¢æ¿
                setTimeout(() => {
                    statsDiv.classList.add('active');
                }, 500);
                
                // åŠ è½½çœŸå®NFTæ•°æ®
                await loadRealNFTs();
                
                // è®¡ç®—çœŸå®NFTæ•°é‡
                const realNftCount = demoStars.filter(star => star.isReal && star.tokenId).length;
                stats.realNftCount = realNftCount;
                
                // é€ä¸ªåˆ›å»ºæ˜Ÿæ˜Ÿ
                demoStars.forEach((starData, index) => {
                    setTimeout(() => {
                        createStar(starData, index);
                        
                        // æ›´æ–°ç»Ÿè®¡
                        stats.starCount = index + 1;
                        stats.memoryCount = index + 1;
                        stats.brightness = Math.min((index + 1) * 11, 100);
                        
                        // æ•°å­—åŠ¨ç”»
                        animateNumber(document.getElementById('star-count'), stats.starCount);
                        animateNumber(document.getElementById('real-nft-count'), stats.realNftCount);
                        animateNumber(document.getElementById('memory-count'), stats.memoryCount);
                        animateNumber(document.getElementById('brightness'), stats.brightness);
                        
                        // æœ€åä¸€é¢—æ˜Ÿæ˜Ÿåˆ›å»ºå®Œæˆåéšè—åŠ è½½æŒ‡ç¤ºå™¨
                        if (index === demoStars.length - 1) {
                            setTimeout(() => {
                                loadingIndicator.classList.remove('active');
                            }, 1000);
                        }
                    }, (index + 1) * 600); // æ¯é¢—æ˜Ÿæ˜Ÿé—´éš”600mså‡ºç°
                });
            }

            // åŠ è½½çœŸå®NFTæ•°æ®
            async function loadRealNFTs() {
                try {
                    console.log("å°è¯•åŠ è½½çœŸå®NFTæ•°æ®...");
                    const provider = new ethers.JsonRpcProvider(rpcUrl);
                    const contract = new ethers.Contract(contractAddress, contractABI, provider);
                    
                    // æ£€æŸ¥æ˜¯å¦æœ‰NFT
                    const balance = await contract.balanceOf(nftOwnerAddress);
                    console.log(`æ‰¾åˆ° ${balance.toString()} ä¸ªçœŸå®NFT`);
                    
                    if (balance > 0) {
                        const realNFTs = [];
                        // éå†æ‰€æœ‰å¯èƒ½çš„token IDï¼Œæ‰¾åˆ°è¯¥åœ°å€æ‹¥æœ‰çš„æ‰€æœ‰NFT
                        for (let i = 1; i <= 100; i++) { // å¢åŠ æ£€æŸ¥èŒƒå›´
                            try {
                                const owner = await contract.ownerOf(i);
                                if (owner.toLowerCase() === nftOwnerAddress.toLowerCase()) {
                                    console.log(`æ‰¾åˆ°çœŸå®NFT Token ID: ${i}`);
                                    
                                    try {
                                        const tokenURI = await contract.tokenURI(i);
                                        const metadataUrl = `https://gateway.pinata.cloud/ipfs/${tokenURI}`;
                                        const metadataResponse = await fetch(metadataUrl);
                                        
                                        if (metadataResponse.ok) {
                                            const metadata = await metadataResponse.json();
                                            const imageUrl = `https://gateway.pinata.cloud/ipfs/${metadata.image.replace('ipfs://', '')}`;
                                            
                                            realNFTs.push({
                                                tokenId: i,
                                                title: metadata.name || `çœŸå®å›å¿† #${i}`,
                                                content: metadata.description || "è¿™æ˜¯ä¸€ä»½çè´µçš„çœŸå®å›å¿†",
                                                image: imageUrl
                                            });
                                        }
                                    } catch (metadataError) {
                                        console.log(`Token ${i} å…ƒæ•°æ®è·å–å¤±è´¥:`, metadataError);
                                        // å³ä½¿å…ƒæ•°æ®è·å–å¤±è´¥ï¼Œä¹Ÿæ·»åŠ å ä½ç¬¦
                                        realNFTs.push({
                                            tokenId: i,
                                            title: `çœŸå®å›å¿† #${i}`,
                                            content: "è¿™æ˜¯ä¸€ä»½çè´µçš„çœŸå®å›å¿†",
                                            image: createPlaceholderImage(i)
                                        });
                                    }
                                    
                                    // å¦‚æœå·²ç»æ‰¾åˆ°äº†ç›®æ ‡æ•°é‡çš„NFTï¼Œåœæ­¢æœç´¢
                                    if (realNFTs.length >= balance) {
                                        break;
                                    }
                                }
                            } catch (e) {
                                // Tokenä¸å­˜åœ¨æˆ–å…¶ä»–é”™è¯¯ï¼Œç»§ç»­æ£€æŸ¥ä¸‹ä¸€ä¸ª
                            }
                        }
                        
                        // ä¸ºæ¯ä¸ªçœŸå®NFTåˆ›å»ºæ˜Ÿæ˜Ÿæ•°æ®
                        const nftPositions = generateNFTPositions(realNFTs.length);
                        realNFTs.forEach((nft, index) => {
                            const realStarData = {
                                id: `real-${nft.tokenId}`,
                                title: nft.title,
                                content: nft.content,
                                image: nft.image,
                                position: nftPositions[index],
                                size: "large",
                                color: "golden",
                                isReal: true,
                                tokenId: nft.tokenId
                            };
                            
                            // æ’å…¥åˆ°æ•°ç»„å¼€å¤´ï¼Œè®©çœŸå®NFTæ˜Ÿæ˜Ÿä¼˜å…ˆæ˜¾ç¤º
                            demoStars.unshift(realStarData);
                        });
                        
                        console.log(`æˆåŠŸåŠ è½½ ${realNFTs.length} ä¸ªçœŸå®NFTæ•°æ®ï¼`);
                    } else {
                        console.log("è¯¥åœ°å€æ²¡æœ‰æ‹¥æœ‰ä»»ä½•NFTï¼Œæ·»åŠ å ä½ç¬¦");
                        // æ·»åŠ ä¸€ä¸ªå ä½ç¬¦æ˜Ÿæ˜Ÿ
                        const placeholderStar = {
                            id: "placeholder-0",
                            title: "ç­‰å¾…ä¸­çš„å›å¿†",
                            content: "è¿™é‡Œå°†æ˜¾ç¤ºä½ çš„ç¬¬ä¸€ä¸ªNFTå›å¿†...",
                            image: createPlaceholderImage(0),
                            position: { top: "48%", left: "48%" },
                            size: "large",
                            color: "golden",
                            isReal: true,
                            tokenId: null
                        };
                        demoStars.unshift(placeholderStar);
                    }
                } catch (error) {
                    console.log("åŠ è½½çœŸå®NFTå¤±è´¥ï¼Œå°†ä½¿ç”¨å ä½ç¬¦:", error.message);
                    // ä½¿ç”¨å ä½ç¬¦
                    const placeholderStar = {
                        id: "placeholder-error",
                        title: "è¿æ¥ä¸­çš„å›å¿†",
                        content: "æ­£åœ¨è¿æ¥åˆ°åŒºå—é“¾ç½‘ç»œ...",
                        image: createPlaceholderImage("error"),
                        position: { top: "48%", left: "48%" },
                        size: "large",
                        color: "golden",
                        isReal: true,
                        tokenId: null
                    };
                    demoStars.unshift(placeholderStar);
                }
                
                // é‡æ–°åˆ›å»ºèƒŒæ™¯æ˜Ÿæ˜Ÿï¼Œè€ƒè™‘çœŸå®NFTçš„ä½ç½®
                const avoidZones = generateAvoidZones();
                createBackgroundStars(avoidZones);
            }

            // ç”ŸæˆNFTæ˜Ÿæ˜Ÿçš„ä½ç½®
            function generateNFTPositions(count) {
                const positions = [];
                
                if (count === 1) {
                    // å•ä¸ªNFTæ”¾åœ¨ä¸­å¿ƒ
                    positions.push({ top: "48%", left: "48%" });
                } else if (count <= 3) {
                    // å°‘é‡NFTæ°´å¹³æ’åˆ—åœ¨ä¸­å¿ƒ
                    const centerLeft = 48;
                    const spacing = 15;
                    const startLeft = centerLeft - ((count - 1) * spacing / 2);
                    
                    for (let i = 0; i < count; i++) {
                        positions.push({
                            top: "48%",
                            left: `${startLeft + i * spacing}%`
                        });
                    }
                } else {
                    // å¤šä¸ªNFTå½¢æˆåœ†å½¢æ’åˆ—
                    const centerX = 48;
                    const centerY = 48;
                    const radius = 20;
                    
                    for (let i = 0; i < count; i++) {
                        const angle = (i * 2 * Math.PI) / count;
                        const x = centerX + radius * Math.cos(angle);
                        const y = centerY + radius * Math.sin(angle);
                        
                        positions.push({
                            top: `${Math.max(10, Math.min(90, y))}%`,
                            left: `${Math.max(10, Math.min(90, x))}%`
                        });
                    }
                }
                
                return positions;
            }

            // åˆ›å»ºå ä½ç¬¦å›¾åƒ
            function createPlaceholderImage(id) {
                const messages = [
                    "çœŸå®çš„å›å¿†",
                    "çè´µçš„æ—¶åˆ»", 
                    "æ¸©æš–çš„è¯è¯­",
                    "ç¾å¥½çš„ç¥æ„¿",
                    "è¿æ¥ä¸­çš„å›å¿†"
                ];
                
                const message = typeof id === 'number' ? messages[id % messages.length] : messages[4];
                
                return `data:image/svg+xml;base64,${btoa(`
                    <svg width="400" height="300" xmlns="http://www.w3.org/2000/svg">
                        <rect width="100%" height="100%" fill="#fff8ee"/>
                        <text x="50%" y="40%" font-family="Arial" font-size="20" fill="#333333" text-anchor="middle">
                            ğŸŒŸ ${message}
                        </text>
                        <text x="50%" y="60%" font-family="Arial" font-size="14" fill="#666666" text-anchor="middle">
                            è¿™é‡Œå°†æ˜¾ç¤ºæ¥è‡ªåŒºå—é“¾çš„çè´µå›å¿†
                        </text>
                    </svg>
                `)}`;
            }

            function createStar(starData, index) {
                const star = document.createElement('div');
                let className = `star clickable appearing ${starData.size || 'normal'} ${starData.color || 'normal'}`;
                
                // å¦‚æœæ˜¯çœŸå®NFTæ˜Ÿæ˜Ÿï¼Œæ·»åŠ ç‰¹æ®Šç±»
                if (starData.isReal) {
                    className += ' real-nft';
                }
                
                star.className = className;
                star.style.top = starData.position.top;
                star.style.left = starData.position.left;
                star.style.animationDelay = `${Math.random() * 2}s`;
                
                // ç‚¹å‡»äº‹ä»¶
                star.addEventListener('click', () => {
                    letterImage.src = starData.image;
                    letterViewer.classList.add('active');
                    letterViewer.style.display = 'flex';
                    
                    // ä¸ºçœŸå®NFTæ·»åŠ ç‰¹æ®Šæ ‡è¯†
                    if (starData.isReal && starData.tokenId) {
                        // åˆ›å»ºNFTä¿¡æ¯æ ‡ç­¾
                        let nftInfo = document.getElementById('nft-info');
                        if (!nftInfo) {
                            nftInfo = document.createElement('div');
                            nftInfo.id = 'nft-info';
                            nftInfo.style.cssText = `
                                position: absolute;
                                top: 30px;
                                left: 30px;
                                background: rgba(255, 215, 0, 0.95);
                                color: #000;
                                padding: 12px 18px;
                                border-radius: 25px;
                                font-family: 'ZCOOL KuaiLe', cursive;
                                font-size: 14px;
                                font-weight: bold;
                                box-shadow: 
                                    0 4px 20px rgba(255, 215, 0, 0.5),
                                    0 0 25px rgba(255, 215, 0, 0.3);
                                backdrop-filter: blur(10px);
                                border: 2px solid rgba(255, 255, 255, 0.6);
                                z-index: 1001;
                            `;
                            letterViewer.appendChild(nftInfo);
                        }
                        nftInfo.textContent = `ğŸŒŸ çœŸå®NFT #${starData.tokenId}`;
                        nftInfo.style.display = 'block';
                    } else {
                        // éšè—NFTä¿¡æ¯æ ‡ç­¾
                        const nftInfo = document.getElementById('nft-info');
                        if (nftInfo) {
                            nftInfo.style.display = 'none';
                        }
                    }
                    
                    // çœŸå®NFTæ˜Ÿæ˜Ÿçš„ç‰¹æ®Šç‚¹å‡»åé¦ˆ
                    if (starData.isReal) {
                        star.style.transform = 'scale(2.5)';
                        star.style.filter = 'drop-shadow(0 0 30px gold)';
                        setTimeout(() => {
                            star.style.transform = '';
                            star.style.filter = '';
                        }, 400);
                    } else {
                        star.style.transform = 'scale(2)';
                        setTimeout(() => {
                            star.style.transform = '';
                        }, 300);
                    }
                });
                
                gallery.appendChild(star);
                
                // åˆ›å»ºå®Œæˆåç§»é™¤appearingç±»ï¼Œä½†ä¿ç•™å…¶ä»–ç±»
                setTimeout(() => {
                    star.classList.remove('appearing');
                }, 800);
            }
        });

        // é”®ç›˜å¿«æ·é”®
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                const letterViewer = document.getElementById('letter-viewer');
                if (letterViewer.classList.contains('active')) {
                    letterViewer.classList.remove('active');
                    setTimeout(() => {
                        letterViewer.style.display = 'none';
                    }, 300);
                }
            }
        });
    </script>
</body>
</html>
